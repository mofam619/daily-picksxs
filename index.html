<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Football Bet Builder</title>
  <meta name="theme-color" content="#004d00">
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
    body{background:#111;color:#eee;padding:8px}
    h1{text-align:center;margin:12px 0 8px;font-size:1.4rem}
    .day{margin-bottom:14px}
    .day-head{background:#004d00;padding:6px 10px;font-weight:bold;border-radius:4px 4px 0 0}
    .match{background:#222;margin:0 4px 4px;border-radius:4px;padding:8px;cursor:pointer}
    .match:hover{background:#333}
    .teams{font-size:1.05rem}
    .time{font-size:.8rem;color:#aaa}
    .builder{display:none;margin-top:8px;font-size:.85rem}
    .bb-row{display:flex;justify-content:space-between;align-items:center;background:#444;margin:4px 0;padding:6px;border-radius:3px}
    .bb-label{color:#ccc}.bb-odd{font-weight:bold}
    .safe{color:#7cfc00}.med{color:#ffd700}.risk{color:#ff4500}
    #noGames{text-align:center;margin-top:30px}
  </style>
</head>
<body>
  <h1>Football Bet Builder</h1>
  <div id="root">Loadingâ€¦</div>

  <script>
    const root=document.getElementById('root');
    const dates=[...Array(7).keys()].map(d=>{
      const dt=new Date();dt.setDate(dt.getDate()+d);
      return dt.toISOString().split('T')[0];
    });

    async function getDay(date){
      try{
        const res=await fetch(`https://www.thesportsdb.com/api/v1/json/3/eventsday.php?d=${date}&s=Soccer`);
        const data=await res.json();
        return data.events||[];
      }catch{return[];}
    }
    function mockOdds(home,away){ // simple model
      const h=home.length%5, a=away.length%5;
      return {
        homeWin:1.55+h*.1, draw:3.4, awayWin:2.3+a*.1,
        bttsY:1.80, bttsN:1.90,
        over25:1.85, under25:1.95,
        homeO05:1.30, homeU05:3.2,
        awayO05:1.35, awayU05:3.0
      };
    }
    function render(){
      let html='';
      let total=0;
      for(const d of dates){
        const day=d;
        const list=cache[day]||[];
        total+=list.length;
        html+=`<div class="day"><div class="day-head">${new Date(d+'T00:00').toDateString()}</div>`;
        if(list.length===0)html+=`<div class="match">No matches</div>`;
        else{
          for(const m of list){
            const id=m.idEvent;
            const o=mockOdds(m.strHomeTeam,m.strAwayTeam);
            html+=`<div class="match" onclick="toggle('${id}')">
                     <div class="teams">${m.strHomeTeam} vs ${m.strAwayTeam}</div>
                     <div class="time">${m.strTime||''} UTC</div>
                     <div id="${id}" class="builder">
                       <div class="bb-row"><span class="bb-label">Home Win</span><span class="bb-odd safe">${o.homeWin.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Draw</span><span class="bb-odd med">${o.draw.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Away Win</span><span class="bb-odd risk">${o.awayWin.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">BTTS Yes</span><span class="bb-odd">${o.bttsY.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">BTTS No</span><span class="bb-odd">${o.bttsN.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Over 2.5</span><span class="bb-odd">${o.over25.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Under 2.5</span><span class="bb-odd">${o.under25.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Home &gt;0.5</span><span class="bb-odd">${o.homeO05.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Home &lt;0.5</span><span class="bb-odd">${o.homeU05.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Away &gt;0.5</span><span class="bb-odd">${o.awayO05.toFixed(2)}</span></div>
                       <div class="bb-row"><span class="bb-label">Away &lt;0.5</span><span class="bb-odd">${o.awayU05.toFixed(2)}</span></div>
                     </div>
                   </div>`;
          }
        }
        html+=`</div>`;
      }
      root.innerHTML=total?html:'<div id="noGames">No fixtures this week</div>';
    }
    function toggle(id){
      const b=document.getElementById(id);
      b.style.display=b.style.display==='block'?'none':'block';
    }
    const cache={};
    (async()=>{
      for(const d of dates)cache[d]=await getDay(d);
      render();
    })();
  </script>
</body>
</html>
